<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PPAT - 프록시 모니터링 시스템</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.datatables.net/1.13.7/css/dataTables.bootstrap5.min.css" rel="stylesheet">
    <link href="https://cdn.datatables.net/buttons/2.4.2/css/buttons.bootstrap5.min.css" rel="stylesheet">
    <link href="https://cdn.datatables.net/responsive/2.5.0/css/responsive.bootstrap5.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/static/css/app.css">
    <style>
      /* DataTables 커스텀 스타일 */
      .dataTables_wrapper { font-size: 0.875rem; }
      .dataTables_wrapper .dt-buttons { margin-bottom: 1rem; }
      .dataTables_wrapper .dataTables_filter { margin-bottom: 1rem; }
      .dataTables_wrapper .table td { vertical-align: middle; }
      .dataTables_wrapper .table td.truncate { max-width: 480px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
      /* 반응형 조정 */
      @media screen and (max-width: 768px) {
        .dataTables_wrapper .dt-buttons { text-align: center; margin-bottom: 0.5rem; }
        .dataTables_wrapper .dataTables_filter { text-align: center; }
      }
    </style>
</head>
<body>
    <div id="app" class="app-wrapper">
        <!-- Top Navigation -->
        <nav class="navbar navbar-expand-lg navbar-light sticky-top">
            <div class="container-xxl">
                <a class="navbar-brand" href="#">PPAT</a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"                        aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                        <li class="nav-item">
                            <a class="nav-link active" href="#management" onclick="showTab('management')">관리</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#resources" onclick="showTab('resources')">자원사용률</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#sessions" onclick="showTab('sessions')">세션브라우저</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#" onclick="alert('개발 예정')">정책조회</a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>

        <!-- 메인 컨텐츠 -->
        <main class="main-content">
            <div class="toast-container"></div>

            <div class="container-xxl">
            <!-- 관리 탭 -->
            <section id="managementTab" class="section">
                <!-- 프록시 그룹 관리 섹션 -->
                <div class="row mb-4">
                    <div class="col-12">
                        <div class="card shadow-sm">
                            <div class="card-header bg-white d-flex justify-content-between align-items-center">
                                <h5 class="mb-0 text-muted">프록시 그룹</h5>
                                <button class="btn btn-primary btn-sm" onclick="showGroupModal()">
                                    그룹 추가
                                </button>
                            </div>
                            <div class="card-body p-0">
                                <div class="table-responsive">
                                    <table class="table table-hover table-sm mb-0">
                                        <thead class="table-light">
                                            <tr>
                                                <th class="border-0 ps-3">그룹명</th>
                                                <th class="border-0">설명</th>
                                                <th class="border-0">프록시 수</th>
                                                <th class="border-0">메인 서버</th>
                                                <th class="border-0 text-center">작업</th>
                                            </tr>
                                        </thead>
                                        <tbody id="groupTableBody">
                                            <!-- 그룹 목록이 여기에 동적으로 로드됩니다 -->
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 프록시 서버 관리 섹션 -->
                <div class="row mb-4">
                    <div class="col-12">
                        <div class="card shadow-sm">
                            <div class="card-header bg-white d-flex justify-content-between align-items-center">
                                <h5 class="mb-0 text-muted">프록시 서버</h5>
                                <button class="btn btn-primary btn-sm" onclick="showModal()">
                                    프록시 추가
                                </button>
                            </div>
                            <div class="card-body p-0">
                                <div class="table-responsive">
                                    <table class="table table-hover table-sm mb-0">
                                        <thead class="table-light">
                                            <tr>
                                                <th class="border-0 ps-3">이름</th>
                                                <th class="border-0">IP 주소</th>
                                                <th class="border-0">그룹</th>
                                                <th class="border-0">역할</th>
                                                <th class="border-0">상태</th>
                                                <th class="border-0 text-center">작업</th>
                                            </tr>
                                        </thead>
                                        <tbody id="proxyTableBody">
                                            <!-- 프록시 목록이 여기에 동적으로 로드됩니다 -->
                                        </tbody>
                                    </table>
                                </div>

                                <!-- 빈 상태 메시지 -->
                                <div id="emptyMessage" class="text-center py-5" style="display: none;">
                                    <div class="text-muted mb-3">
                                        <svg width="48" height="48" viewBox="0 0 24 24" fill="currentColor">
                                            <path d="M4,6V8H6V6H4M6,10V12H4V10H6M6,14V16H4V14H6M6,18V20H4V18H6M8,6V8H10V6H8M10,10V12H8V10H10M8,14V16H10V14H8M8,18V20H10V18H8M12,6V8H14V6H12M14,10V12H12V10H14M12,14V16H14V14H12M12,18V20H14V18H12M16,6V8H18V6H16M18,10V12H16V10H18M16,14V16H18V14H16M16,18V20H18V18H16M20,6V8H22V6H20M22,10V12H20V10H22M20,14V16H22V14H20M20,18V20H22V18H20Z"/>
                                        </svg>
                                    </div>
                                    <h6 class="text-muted">등록된 프록시 서버가 없습니다</h6>
                                    <p class="text-muted small">첫 번째 프록시 서버를 추가해보세요.</p>
                                    <button class="btn btn-primary btn-sm" onclick="showModal()">
                                        프록시 추가
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 모니터링 설정 관리 섹션 -->
                <div class="row">
                    <div class="col-12">
                        <div class="card shadow-sm">
                            <div class="card-header bg-white d-flex justify-content-between align-items-center">
                                <h5 class="mb-0 text-muted">모니터링 설정 관리</h5>
                                <button class="btn btn-primary btn-sm" onclick="saveMonitoringConfig()">저장</button>
                            </div>
                            <div class="card-body">
                                <div class="row g-3">
                                    <div class="col-md-6">
                                        <label class="form-label small">세션 명령어 (session_cmd)</label>
                                        <textarea id="configSessionCmd" class="form-control" rows="4" placeholder="세션 조회 명령어"></textarea>
                                    </div>
                                    <div class="col-md-6">
                                        <label class="form-label small">SNMP OID 설정 (JSON)</label>
                                        <textarea id="configSnmpOids" class="form-control" rows="4" placeholder='{"CPU":"...","Memory":"..."}'></textarea>
                                    </div>
                                    <div class="col-md-3">
                                        <label class="form-label small">CPU 임계치 (%)</label>
                                        <input id="configCpuThreshold" type="number" class="form-control" min="0" max="100" value="80">
                                    </div>
                                    <div class="col-md-3">
                                        <label class="form-label small">메모리 임계치 (%)</label>
                                        <input id="configMemoryThreshold" type="number" class="form-control" min="0" max="100" value="80">
                                    </div>
                                    <div class="col-md-3">
                                        <label class="form-label small">기본 주기 (초)</label>
                                        <input id="configDefaultInterval" type="number" class="form-control" min="5" step="5" value="30">
                                    </div>
                                    <div class="col-md-3 d-flex align-items-end">
                                        <button class="btn btn-outline-secondary w-100" onclick="loadMonitoringConfig()">설정 새로고침</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 자원사용률 탭 -->
            <section id="resourcesTab" class="section" style="display: none;">
                <!-- 요약 통계 -->
                <div class="row mb-4">
                    <div class="col-md-3">
                        <div class="card text-center shadow-sm">
                            <div class="card-body">
                                <h5 class="card-title text-primary" id="totalProxiesCount">0</h5>
                                <p class="card-text small text-muted">전체 프록시</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="card text-center shadow-sm">
                            <div class="card-body">
                                <h5 class="card-title text-success" id="activeProxiesCount">0</h5>
                                <p class="card-text small text-muted">온라인</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="card text-center shadow-sm">
                            <div class="card-body">
                                <h5 class="card-title text-secondary" id="offlineProxiesCount">0</h5>
                                <p class="card-text small text-muted">오프라인</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="card text-center shadow-sm">
                            <div class="card-body">
                                <h5 class="card-title text-secondary" id="resourcesGroupLabel">그룹 선택</h5>
                                <div class="group-selector">
                                    <select id="resourcesGroupSelect" class="form-select form-select-sm"></select>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 모니터링 설정 -->
                <div class="row mb-4">
                    <div class="col-12">
                        <div class="card shadow-sm">
                            <div class="card-header bg-white">
                                <h6 class="mb-0 text-muted">모니터링 설정</h6>
                            </div>
                            <div class="card-body">
                                <div class="row g-4 align-items-center">
                                    <div class="col-md-4">
                                        <label class="form-label small mb-2">갱신 주기</label>
                                        <div class="interval-selector">
                                            <button class="interval-btn" data-value="10" onclick="MonitoringController.updateInterval(10)">10초</button>
                                            <button class="interval-btn active" data-value="30" onclick="MonitoringController.updateInterval(30)">30초</button>
                                            <button class="interval-btn" data-value="60" onclick="MonitoringController.updateInterval(60)">1분</button>
                                            <button class="interval-btn" data-value="300" onclick="MonitoringController.updateInterval(300)">5분</button>
                                        </div>
                                        <div class="mt-2">
                                            <small class="text-muted">수집된 항목: <span class="badge bg-light text-dark" id="collectedItemsCount">8</span></small>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="d-flex flex-column gap-1">
                                            <div class="d-flex align-items-center gap-2">
                                                <i class="fas fa-history text-muted"></i>
                                                <small class="text-muted">마지막 업데이트:</small>
                                                <span id="lastUpdate" class="badge bg-light text-dark">정보 없음</span>
                                            </div>
                                            <div class="d-flex align-items-center gap-2">
                                                <i class="fas fa-clock text-muted"></i>
                                                <small class="text-muted">다음 업데이트:</small>
                                                <span id="nextUpdate" class="badge bg-light text-dark">정보 없음</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="monitoring-controls">
                                            <span class="badge bg-secondary" id="monitoringStatus">정지됨</span>
                                            <div class="btn-group">
                                                <button class="btn btn-success" id="startMonitoringBtn" onclick="MonitoringController.startMonitoring()">
                                                    <i class="fas fa-play me-1"></i>시작
                                                </button>
                                                <button class="btn btn-danger" id="stopMonitoringBtn" onclick="MonitoringController.stopMonitoring()" disabled>
                                                    <i class="fas fa-stop me-1"></i>중지
                                                </button>
                                            </div>
                                            <button class="btn btn-outline-primary" id="manualRefreshBtn" onclick="refreshResources()" disabled>
                                                <i class="fas fa-sync-alt me-1"></i>새로고침
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 리소스 모니터링 테이블 -->
                <div class="row">
                    <div class="col-12">
                        <div class="card shadow-sm">
                            <div class="card-header bg-white">
                                <h5 class="mb-0 text-muted">실시간 자원사용률</h5>
                            </div>
                            <div class="card-body p-0">
                                <div class="table-responsive">
                                    <table class="table table-hover table-sm mb-0 resources-table">
                                        <thead class="table-light">
                                            <tr>
                                                <th class="border-0 ps-3 col-proxy">프록시</th>
                                                <th class="border-0 col-group">그룹</th>
                                                <th class="border-0 col-role">역할</th>
                                                <th class="border-0 col-metrics">CPU</th>
                                                <th class="border-0 col-metrics">메모리</th>
                                                <th class="border-0 col-metrics">고유클라이언트</th>
                                                <th class="border-0 col-metrics">CC</th>
                                                <th class="border-0 col-metrics">CS</th>
                                                <th class="border-0 col-metrics">HTTP</th>
                                                <th class="border-0 col-metrics">HTTPS</th>
                                                <th class="border-0 col-metrics">FTP</th>
                                                <th class="border-0 col-status">상태</th>
                                                <th class="border-0 col-update">업데이트</th>
                                            </tr>
                                        </thead>
                                        <tbody id="resourcesTableBody">
                                            <!-- 리소스 데이터가 여기에 동적으로 로드됩니다 -->
                                        </tbody>
                                    </table>
                                </div>

                                <!-- 빈 상태 메시지 -->
                                <div id="resourcesEmptyMessage" class="empty-state" style="display: none;">
                                    <div class="icon">
                                        <i class="fas fa-server fa-3x"></i>
                                    </div>
                                    <h6 class="title">표시할 프록시가 없습니다</h6>
                                    <p class="description">현재 수집된 데이터가 없거나 선택된 그룹에 활성화된 프록시가 없습니다.</p>
                                    <button class="btn btn-primary" onclick="MonitoringController.startMonitoring()">
                                        <i class="fas fa-play me-1"></i>모니터링 시작
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 세션브라우저 탭 -->
            <section id="sessionsTab" class="section" style="display: none;">
                <div class="row mb-3">
                    <div class="col-12">
                        <div class="card shadow-sm">
                            <div class="card-header bg-white">
                                <div class="d-flex align-items-center justify-content-between mb-3">
                                    <h5 class="mb-0 text-muted">세션 브라우저</h5>
                                    <div id="sessionLoadingStatus" class="loading-spinner" style="display: none;">
                                        <i class="fas fa-spinner"></i>
                                        <span>세션 정보 로딩 중...</span>
                                    </div>
                                </div>
                                <!-- 세션 조회 컨트롤 -->
                                <div class="session-query-card mb-4">
                                    <div class="card shadow-sm">
                                        <div class="card-body">
                                            <div class="row g-3">
                                                <div class="col-md-5">
                                                    <label for="sessionGroupSelect" class="form-label d-flex align-items-center">
                                                        <i class="fas fa-layer-group me-2 text-muted"></i>
                                                        <span>프록시 그룹</span>
                                                        <span class="text-danger ms-1">*</span>
                                                    </label>
                                                    <select id="sessionGroupSelect" class="form-select" data-placeholder="그룹을 선택하세요">
                                                        <option value="">그룹을 선택하세요</option>
                                                    </select>
                                                    <!-- <div class="form-text text-muted small">
                                                        <i class="fas fa-info-circle me-1"></i>먼저 프록시 그룹을 선택해주세요
                                                    </div> -->
                                                </div>
                                                <div class="col-md-5">
                                                    <label for="sessionProxySelect" class="form-label d-flex align-items-center">
                                                        <i class="fas fa-server me-2 text-muted"></i>
                                                        <span>프록시 서버</span>
                                                    </label>
                                                    <select id="sessionProxySelect" class="form-select" data-placeholder="서버를 선택하세요">
                                                        <option value="">전체 서버</option>
                                                    </select>
                                                    <!-- <div class="form-text text-muted small">
                                                        <i class="fas fa-info-circle me-1"></i>선택 안함 시 그룹 내 모든 서버 조회
                                                    </div> -->
                                                </div>
                                                <div class="col-md-2 d-flex align-items-center">
                                                    <button class="btn btn-primary w-100" id="fetchSessionsBtn" onclick="fetchSessionsFromSource()">
                                                        <i class="fas fa-sync-alt me-1"></i>세션 가져오기
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="card-body p-0">
                                <!-- 초기 안내 메시지 -->
                                <div id="sessionsInitialState" class="sessions-empty-state">
                                    <div class="icon">
                                        <i class="fas fa-info-circle fa-3x"></i>
                                    </div>
                                    <h6 class="title">세션 정보를 조회하려면</h6>
                                    <p class="description">프록시 그룹을 선택하고 '세션 가져오기' 버튼을 클릭하세요.</p>
                                </div>
                                
                                <!-- 세션 테이블 -->
                                <div id="sessionsTableContainer" class="table-responsive" style="display: none;">
                                    <div class="sessions-table-controls p-3 border-bottom">
                                        <div class="d-flex flex-wrap gap-3">
                                            <!-- 왼쪽 컨트롤 -->
                                            <div class="d-flex align-items-center gap-2">
                                                <div class="page-size-selector">
                                                    <label class="form-label small mb-0">페이지당 표시</label>
                                                    <select id="sessionPageSize" class="form-select form-select-sm" onchange="updatePageSize(this.value)">
                                                        <option value="10">10개</option>
                                                        <option value="25" selected>25개</option>
                                                        <option value="50">50개</option>
                                                        <option value="100">100개</option>
                                                    </select>
                                                </div>
                                                <button class="btn btn-outline-secondary btn-sm" onclick="toggleColumnSettings()">
                                                    <i class="fas fa-columns me-1"></i>컬럼 설정
                                                </button>
                                            </div>
                                            
                                            <!-- 중앙 검색 -->
                                            <div class="search-box flex-grow-1">
                                                <div class="input-group">
                                                    <span class="input-group-text bg-transparent border-end-0">
                                                        <i class="fas fa-search text-muted"></i>
                                                    </span>
                                                    <input type="search" id="sessionSearch" class="form-control border-start-0" placeholder="검색어를 입력하세요...">
                                                </div>
                                            </div>
                                            
                                            <!-- 오른쪽 내보내기 -->
                                            <div class="d-flex align-items-center gap-2">
                                                <div class="btn-group">
                                                    <button class="btn btn-outline-secondary btn-sm" onclick="exportSessions('excel')">
                                                        <i class="fas fa-file-excel me-1"></i>Excel
                                                    </button>
                                                    <button class="btn btn-outline-secondary btn-sm" onclick="exportSessions('csv')">
                                                        <i class="fas fa-file-csv me-1"></i>CSV
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <table id="sessionsTable" class="table table-hover table-sm mb-0" style="width:100%">
                                        <thead class="table-light">
                                            <tr>
                                                <th style="display:none;">ID</th>
                                                <th>Proxy</th>
                                                <th>Client IP</th>
                                                <th>Server IP</th>
                                                <th>User</th>
                                                <th>URL Host</th>
                                                <th>Category</th>
                                                <th>Bytes Sent</th>
                                                <th>Bytes Received</th>
                                                <th>Age</th>
                                                <th>Created At</th>
                                            </tr>
                                        </thead>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- 세션 상세 모달 -->
                <div class="modal fade" id="sessionDetailModal" tabindex="-1" aria-labelledby="sessionDetailModalLabel" aria-hidden="true">
                    <div class="modal-dialog modal-lg">
                        <div class="modal-content">
                            <div class="modal-header border-0">
                                <div>
                                    <h5 class="modal-title mb-1" id="sessionDetailModalLabel">세션 상세 정보</h5>
                                    <p class="text-muted mb-0" id="sessionDetailSubtitle"></p>
                                </div>
                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>
                            <div class="modal-body">
                                <!-- 로딩 상태 -->
                                <div id="sessionDetailLoading" class="text-center py-5" style="display: none;">
                                    <div class="loading-spinner d-inline-flex">
                                        <i class="fas fa-spinner"></i>
                                        <span>세션 정보를 불러오는 중...</span>
                                    </div>
                                </div>
                                
                                <!-- 에러 상태 -->
                                <div id="sessionDetailError" class="sessions-empty-state" style="display: none;">
                                    <div class="icon">
                                        <i class="fas fa-exclamation-circle fa-3x"></i>
                                    </div>
                                    <h6 class="title">세션 정보를 불러올 수 없습니다</h6>
                                    <p class="description" id="sessionDetailErrorMessage">
                                        잠시 후 다시 시도해주세요.
                                    </p>
                                    <button class="btn btn-outline-primary" onclick="retryLoadSessionDetail()">
                                        <i class="fas fa-sync-alt me-1"></i>다시 시도
                                    </button>
                                </div>
                                
                                <!-- 세션 정보 -->
                                <div id="sessionDetailContent" class="session-detail" style="display: none;">
                                    <!-- 기본 정보 -->
                                    <div class="session-detail-card">
                                        <div class="card-header">
                                            <i class="fas fa-info-circle me-2"></i>기본 정보
                                        </div>
                                        <div class="card-body" id="sessionBasicInfo">
                                            <div class="placeholder-glow">
                                                <span class="placeholder col-6"></span>
                                                <span class="placeholder col-4"></span>
                                                <span class="placeholder col-8"></span>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- 연결 정보 -->
                                    <div class="session-detail-card">
                                        <div class="card-header">
                                            <i class="fas fa-network-wired me-2"></i>연결 정보
                                        </div>
                                        <div class="card-body" id="sessionConnectionInfo">
                                            <div class="placeholder-glow">
                                                <span class="placeholder col-8"></span>
                                                <span class="placeholder col-6"></span>
                                                <span class="placeholder col-4"></span>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- 트래픽 정보 -->
                                    <div class="session-detail-card">
                                        <div class="card-header">
                                            <i class="fas fa-chart-bar me-2"></i>트래픽 정보
                                        </div>
                                        <div class="card-body" id="sessionTrafficInfo">
                                            <div class="placeholder-glow">
                                                <span class="placeholder col-4"></span>
                                                <span class="placeholder col-6"></span>
                                                <span class="placeholder col-8"></span>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- 추가 정보 -->
                                    <div class="session-detail-card">
                                        <div class="card-header">
                                            <i class="fas fa-clipboard-list me-2"></i>추가 정보
                                        </div>
                                        <div class="card-body" id="sessionAdditionalInfo">
                                            <div class="placeholder-glow">
                                                <span class="placeholder col-6"></span>
                                                <span class="placeholder col-8"></span>
                                                <span class="placeholder col-4"></span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="modal-footer border-0">
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">닫기</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            </div><!-- container-xxl -->
        </main>
    </div>

    <!-- 프록시 그룹 모달 -->
    <div class="modal fade" id="groupModal" tabindex="-1" aria-labelledby="groupModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header border-0">
                    <h5 class="modal-title" id="groupModalTitle">프록시 그룹 추가</h5>
                    <button type="button" class="btn-close" onclick="closeGroupModal()"></button>
                </div>
                <div class="modal-body">
                    <form>
                        <div class="mb-3">
                            <label for="groupName" class="form-label">그룹명 <span class="text-danger">*</span></label>
                            <input type="text" class="form-control" id="groupName" placeholder="예: 서울 센터" required>
                        </div>
                        <div class="mb-3">
                            <label for="groupDescription" class="form-label">설명</label>
                            <textarea class="form-control" id="groupDescription" rows="2" placeholder="그룹에 대한 설명을 입력하세요"></textarea>
                        </div>
                    </form>
                </div>
                <div class="modal-footer border-0">
                    <button type="button" class="btn btn-light" onclick="closeGroupModal()">취소</button>
                    <button type="button" class="btn btn-primary" id="saveGroupButton" onclick="saveGroup()">
                        저장
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- 프록시 서버 모달 -->
    <div class="modal fade" id="proxyModal" tabindex="-1" aria-labelledby="proxyModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header border-0">
                    <h5 class="modal-title" id="modalTitle">프록시 추가</h5>
                    <button type="button" class="btn-close" onclick="closeModal()"></button>
                </div>
                <div class="modal-body">
                    <form>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="proxyName" class="form-label">이름 <span class="text-danger">*</span></label>
                                    <input type="text" class="form-control" id="proxyName" placeholder="예: Seoul Main Proxy" required>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="proxyHost" class="form-label">IP 주소 <span class="text-danger">*</span></label>
                                    <input type="text" class="form-control" id="proxyHost" placeholder="예: 192.168.1.100" required>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-4">
                                <div class="mb-3">
                                    <label for="proxySshPort" class="form-label">SSH 포트</label>
                                    <input type="number" class="form-control" id="proxySshPort" value="22" min="1" max="65535">
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="mb-3">
                                    <label for="proxySnmpPort" class="form-label">SNMP 포트</label>
                                    <input type="number" class="form-control" id="proxySnmpPort" value="161" min="1" max="65535">
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="mb-3">
                                    <label for="proxyUsername" class="form-label">사용자명</label>
                                    <input type="text" class="form-control" id="proxyUsername" value="root">
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-4">
                                <div class="mb-3">
                                    <label for="proxySnmpVersion" class="form-label">SNMP 버전</label>
                                    <select class="form-select" id="proxySnmpVersion">
                                        <option value="v2c" selected>SNMP v2c</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="mb-3">
                                    <label for="proxySnmpCommunity" class="form-label">커뮤니티 스트링</label>
                                    <input type="text" class="form-control" id="proxySnmpCommunity" value="public" placeholder="예: public">
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="mb-3">
                                    <label for="proxyGroup" class="form-label">그룹</label>
                                    <select class="form-select" id="proxyGroup">
                                        <option value="">그룹을 선택하세요</option>
                                        <!-- 그룹 옵션들이 동적으로 로드됩니다 -->
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="proxyPassword" class="form-label">비밀번호</label>
                                    <input type="password" class="form-control" id="proxyPassword" placeholder="SSH 비밀번호">
                                </div>
                            </div>
                            <div class="col-md-6">
                                <!-- 빈 공간 -->
                            </div>
                        </div>
                        <div class="mb-3">
                            <label for="proxyDescription" class="form-label">설명</label>
                            <textarea class="form-control" id="proxyDescription" rows="2" placeholder="프록시 서버에 대한 설명을 입력하세요"></textarea>
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="proxyIsActive">
                                    <label class="form-check-label" for="proxyIsActive">
                                        활성화 상태로 시작
                                    </label>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="proxyIsMain">
                                    <label class="form-check-label" for="proxyIsMain">
                                        메인 클러스터로 지정
                                    </label>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer border-0">
                    <button type="button" class="btn btn-light" onclick="closeModal()">취소</button>
                    <button type="button" class="btn btn-primary" id="saveButton" onclick="saveProxy()">
                        저장
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- jQuery, Bootstrap & DataTables JS -->
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- DataTables Core -->
    <script src="https://cdn.datatables.net/1.13.7/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.7/js/dataTables.bootstrap5.min.js"></script>
    <!-- DataTables Buttons -->
    <script src="https://cdn.datatables.net/buttons/2.4.2/js/dataTables.buttons.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.4.2/js/buttons.bootstrap5.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.4.2/js/buttons.html5.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.4.2/js/buttons.colVis.min.js"></script>
    <!-- DataTables Responsive -->
    <script src="https://cdn.datatables.net/responsive/2.5.0/js/dataTables.responsive.min.js"></script>
    <script src="https://cdn.datatables.net/responsive/2.5.0/js/responsive.bootstrap5.min.js"></script>
    <!-- Additional Dependencies -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.70/pdfmake.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.70/vfs_fonts.js"></script>
    
    <!-- 애플리케이션 스크립트 -->
    <script src="/static/js/app.js"></script>
    <script>
      document.addEventListener('scroll', () => {
        const nav = document.querySelector('.navbar');
        if (window.scrollY > 10) nav.classList.add('scrolled');
        else nav.classList.remove('scrolled');
      });
    </script>
</body>
</html>